# Tun async

[![Testing CI](https://github.com/Scopics/tunasync/workflows/Testing%20CI/badge.svg)](https://github.com/Scopics/tunasync/actions?query=workflow%3A%22Testing+CI%22)
[![Codacy Badge](https://api.codacy.com/project/badge/Grade/20c88faf4e15442eb8ff3d1c63c77d29)](https://app.codacy.com/gh/Scopics/tunasync?utm_source=github.com&utm_medium=referral&utm_content=Scopics/tunasync&utm_campaign=Badge_Grade)
[![license](https://img.shields.io/badge/license-MIT-blue.svg)](https://github.com/Scopics/tunasync/blob/main/LICENSE)

![Logo](https://raw.githubusercontent.com/MaksGovor/Images/master/Voting-system/Logolib.png)

Async library for node.js

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

- [AsyncEmitter](#asyncemitter)
  - [on](#on)
    - [Parameters](#parameters)
  - [onTemporary](#ontemporary)
    - [Parameters](#parameters-1)
  - [once](#once)
    - [Parameters](#parameters-2)
  - [emit](#emit)
    - [Parameters](#parameters-3)
  - [remove](#remove)
    - [Parameters](#parameters-4)
  - [clear](#clear)
    - [Parameters](#parameters-5)
  - [listeners](#listeners)
    - [Parameters](#parameters-6)
  - [count](#count)
    - [Parameters](#parameters-7)
  - [names](#names)
- [map](#map)
  - [Parameters](#parameters-8)
  - [Examples](#examples)
- [asyncMemoize](#asyncmemoize)
  - [Parameters](#parameters-9)
  - [Examples](#examples-1)
- [Queue](#queue)
  - [pushTask](#pushtask)
    - [Parameters](#parameters-10)
  - [done](#done)
    - [Parameters](#parameters-11)
  - [doTasks](#dotasks)
- [queue](#queue-1)
  - [Examples](#examples-2)
- [reduce](#reduce)
  - [Parameters](#parameters-12)
  - [Examples](#examples-3)
- [retry](#retry)
  - [Parameters](#parameters-13)
  - [Examples](#examples-4)
- [series](#series)
  - [Parameters](#parameters-14)
  - [Examples](#examples-5)
- [some](#some)
  - [Parameters](#parameters-15)
  - [Examples](#examples-6)

### AsyncEmitter

Now, an event emitter is an object/method which
triggers an event as soon as some action takes
place so as to pass the control to the parent function.

#### on

It's used to add function when certain event is triggered

##### Parameters

- `name` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** name of the event
- `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** function which will be called when
  event is triggered

#### onTemporary

It's used to hinge a function on a
certain event for a time specified by the third argument

##### Parameters

- `name` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** name of the event
- `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** function which will be called when
  event is triggered
- `timeout` **[Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** time during which the function
  will process this event,
  and after which it will be removed from this event (optional, default `0`)

#### once

It's used to add function which will occur only once

##### Parameters

- `name` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** name of the event
- `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** function which will be called when
  event is triggered

#### emit

It's used to trigger events

##### Parameters

- `name` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** name of the event
- `args` **any** arguments for functions

#### remove

It\`s used to detach (delete) a function
from a specific event

##### Parameters

- `name` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** name of the event
- `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** function that we want to
  remove from this event

#### clear

Method to clear all events from emmiter or just one event

##### Parameters

- `name` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** name of event, optinal paramater

#### listeners

Return all listeners of event

##### Parameters

- `name` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** name of event

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** of listeners

#### count

Return number of listeners of event, or number of events

##### Parameters

- `name` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** name of event, optinal paramater

Returns **[Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)**

#### names

Return array of all events of emitter

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)**

### map

Applies the function fn to each argument
and returns an array of
values that the function returned.

#### Parameters

- `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** A function
  (with a callback or promise contract)
  that takes each argument
  as input and returns the processed value.
  - `fn.item` **any** current value.
  - `fn.itemInde` **any** index of the currently
    processed element in the array.
  - `fn.callback` **any** The callback function
    in which the processed value is passed,
    if fn function with callback contract.
- `arr` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** array of values. (optional, default `[]`)
- `config` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** object with settings
  for a function (optional, default `{}`)

#### Examples

```javascript
const arr = [1, 2, 3, 5];

map(
  (item, cb) => {
    setTimeout(() => {
      cb(null, item + 2);
    }, 10);
  },
  arr,
  { isCb: true }
)
  .then(data => console.log(data))
  .catch(err => console.log(err.message));
```

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** an array of processed
values or an error

### asyncMemoize

Function to memoize the function

#### Parameters

- `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** function to memoize
- `config` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** object with config (optional, default `{}`)
  - `config.isCb` **[Boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** function accepts callback
  - `config.cacheSize` **[Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** max size of cache

#### Examples

```javascript
const sum = async (a, b) => {
  await sleep(100);
  return a + b;
};
const memoizedSum = memoize(sum);
const result = [];
const expectedResult = [4, 6, 4];

memoizedSum(1, 3)
  .then(res => result.push(res))
  .then(() => memoizedSum(1, 5))
  .then(res => result.push(res))
  .then(() => memoizedSum(1, 3))
  .then(res => result.push(res))
  .them(() => console.log(result));
```

Returns **any** the result of function from cache or calculated result

### Queue

Queue constructor

#### pushTask

Add a new task to the queue

##### Parameters

- `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** task to add to the queue
- `args` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** array of arguments for task (optional, default `[]`)

Returns **this**

#### done

Set function that will be done after the all task of queue

##### Parameters

- `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** function to be done

Returns **this**

#### doTasks

Completion of tasks in the queue and save their result

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)**

### queue

Main function to export

#### Examples

```javascript
const q = queue();

const createTask = v => new Promise(res => setTimeout(() => res(v), v));

q.pushTask(createTask, [100])
  .pushTask(createTask, [200])
  .pushTask(createTask, [300]);

q.done(result => console.log(result));
q.doTasks();
```

Returns **[Queue](#queue)** new instance of Queue

### reduce

The reduce() method reduces the array to a single value.
The reduce() method executes a provided function for each
value of the array (from left-to-right). The return value
of the function is stored in an accumulator (result/total).

#### Parameters

- `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** A function
  (with a callback or promise contract)
  that takes each argument
  as input and returns the processed value.
  - `fn.acc` **any** accumulator.
  - `fn.item` **any** current value.
  - `fn.callback` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** The callback function
    in which the processed value is passed,
    if fn function with callback contract.
- `startValue` **any** your starting value,
  otherwise it's 0.
- `arr` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** array of values. (optional, default `[]`)
- `config` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** object with settings
  for a function (optional, default `{}`)

#### Examples

```javascript
reduce(
  (acc, item, callback) => {
    setTimeout(() => callback(null, acc + item), 1000);
  },
  10,
  [1, 2, 3, 4, 5, 6],
  { isCb: true }
)
  .then(res => console.log(res))
  .catch(err => console.log(err.message));
```

Returns **any** result of calculations

### retry

Retry system fot async functions

#### Parameters

- `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** asynchronous function (with or without callback)
  that has to be repeated several times.
- `args` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** array of arguments for the function. (optional, default `[]`)
- `config` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** object with settings for a function. (optional, default `{}`)

#### Examples

```javascript
const fnPromises = require('fs').promises;

retry(fsPromises.readFile, ['some.js', 'utf8'], {
  retries: 5,
  interval: 10,
}).then(data => console.log(data));
```

Returns **any** the value of the fn, or an error

### series

Running multiple functions which depend on the output of
the previous function. If an error is encountered in any
of the tasks, no more functions are run but the final callback
is called with the error value.

#### Parameters

- `fns` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** array of functions
- `done` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** final callback
- `config` (optional, default `{}`)
- `isCb` **[Boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** config for functions,
  is functions has callback logic or async

#### Examples

```javascript
const createFn = value => (err, cb) => {
  setTimeout(() => {
    if (value === 6) return cb(new Error('sorry'));
    else return cb(err, value);
  }, value);
};

const fns = [createFn(2000), createFn(60), createFn(500)];

series(
  fns,
  (err, data) => {
    const result = { err, data };
    console.log(result);
  },
  { isCb: true }
);
```

### some

Applies the function fn to each argument
and returns true if result of function
with any arg is true

#### Parameters

- `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** A function
  (with a callback or promise contract)
  that takes each argument
  as input and returns the processed value.
  - `fn.item` **any** current value.
  - `fn.callback` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** The callback function
    in which the processed value is passed,
    if fn function with callback contract.
- `args` (optional, default `[]`)
- `config` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** object with settings
  for a function (optional, default `{}`)
- `arr` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** array of values.

#### Examples

```javascript
some(
  (filePath, callback) => {
    fs.access(filePath, err => {
      callback(null, !err);
    });
  },
  ['file1', 'file2', 'retry.test.js'],
  { isCb: true }
)
  .then(res => console.log(res))
  .catch(err => console.log(err.message));
```

Returns **[Boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** shows if function from any arg
returns true

## Contributors

- [Говоруха Максим](https://github.com/MaksGovor)
- [Урин Дмитро](https://github.com/tedi4t)
- [Трембач Анастасія](https://github.com/Anastasia-Tre)

## License

Tun async is [MIT licensed](https://github.com/Scopics/tunasync/blob/main/LICENSE).
