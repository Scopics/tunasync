# Tun async

![Logo](https://raw.githubusercontent.com/MaksGovor/Images/master/Voting-system/Logolib.png)

Async library for node.js

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [MyClass](#myclass)
-   [on](#on)
    -   [Parameters](#parameters)
-   [once](#once)
    -   [Parameters](#parameters-1)
-   [emit](#emit)
    -   [Parameters](#parameters-2)
-   [partial](#partial)
    -   [Parameters](#parameters-3)
-   [Queue](#queue)
    -   [pushTask](#pushtask)
        -   [Parameters](#parameters-4)
    -   [done](#done)
        -   [Parameters](#parameters-5)
    -   [doTasks](#dotasks)
-   [queue](#queue-1)
    -   [Examples](#examples)
-   [reduce](#reduce)
    -   [Parameters](#parameters-6)
    -   [Examples](#examples-1)
-   [retry](#retry)
    -   [Parameters](#parameters-7)
    -   [Examples](#examples-2)

### MyClass

Now, an event emitter is an object/method which 
triggers an event as soon as some action takes 
place so as to pass the cntrol to the parent function.

### on

It's used to add function when certain event is triggered

#### Parameters

-   `name` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** name of the event
-   `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** function which will be called when
    event is triggered

### once

It's used to add function which will occur only once

#### Parameters

-   `name` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** name of the event
-   `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** function which will be called when
    event is triggered

### emit

It's used to trigger events

#### Parameters

-   `name` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** name of the event
-   `args` **any** arguments for functions

### partial

Function for partial use of function

#### Parameters

-   `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** function
-   `args` **...[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** array of arguments for function

### Queue

Queue constructor

#### pushTask

Add a new task to the queue

##### Parameters

-   `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** task to add to the queue
-   `args` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** array of arguments for task (optional, default `[]`)

Returns **this** 

#### done

Set function that will be done after the all task of queue

##### Parameters

-   `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** function to be done

Returns **this** 

#### doTasks

Completion of tasks in the queue and save their result

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

### queue

Main function to export

#### Examples

```javascript
const q = queue();

const createTask = v => new Promise(res => setTimeout(() => res(v), v));

q.pushTask(createTask, [100])
.pushTask(createTask, [200])
.pushTask(createTask, [300]);

q.done(result => console.log(result));
q.doTasks();
```

Returns **[Queue](#queue)** new instance of Queue

### reduce

Do function for every element and returns one value

#### Parameters

-   `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** function for every element of array.
    -   `fn.acc` **any** result of previous evaluation
    -   `fn.item` **any** current value
    -   `fn.callback` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** function to call after evaluations
        -   `fn.callback.err` **[Error](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error)** error which is returned to callback
        -   `fn.callback.res` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** result of evaluations which is returned to callback
-   `startValue` **any** start value from which you start your function.
-   `arr` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** array of values. (optional, default `[]`)

#### Examples

```javascript
reduce((acc, item, callback) => {
setTimeout(() => callback(null, acc + item), 1000);
}, 10, [1, 2, 3, 4, 5, 6])
.then(res => console.log(res))
.catch(err => console.log(err.message));
```

Returns **any** returns the value after the equation.

### retry

Retry system fot async functions

#### Parameters

-   `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** An asynchronous function that has to be repeated several times.
-   `args` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** Array of arguments for the function. (optional, default `[]`)
-   `config`   (optional, default `{}`)
-   `confing` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** An object with settings for a function.

#### Examples

```javascript
let minSum = 20;

const asyncSum = async (a, b) => {
await sleep(100);
if (a + b < minSum) {
minSum -= a + b;
throw new Error('Sorry');
}
return a + b;
};

retry(asyncSum, [2, 3], { retries: 5, interval: 10 })
.then(data => test.strictSame(data, expectedResult));
```

Returns **any** the value of the fn, or an error
