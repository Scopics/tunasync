# Tun async

![Logo](https://raw.githubusercontent.com/MaksGovor/Images/master/Voting-system/Logolib.png)

Async library for node.js

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [partial](#partial)
    -   [Parameters](#parameters)
-   [Queue](#queue)
    -   [pushTask](#pushtask)
        -   [Parameters](#parameters-1)
    -   [done](#done)
        -   [Parameters](#parameters-2)
    -   [doTasks](#dotasks)
-   [queue](#queue-1)
    -   [Examples](#examples)
-   [reduce](#reduce)
    -   [Parameters](#parameters-3)
    -   [Examples](#examples-1)
-   [retry](#retry)
    -   [Parameters](#parameters-4)
    -   [Examples](#examples-2)

### partial

Function for partial use of function

#### Parameters

-   `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** function
-   `args` **...[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** array of arguments for function

### Queue

Queue constructor

#### pushTask

Add a new task to the queue

##### Parameters

-   `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** task to add to the queue
-   `args` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** array of arguments for task (optional, default `[]`)

Returns **this** 

#### done

Set function that will be done after the all task of queue

##### Parameters

-   `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** function to be done

Returns **this** 

#### doTasks

Completion of tasks in the queue and save their result

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

### queue

Main function to export

#### Examples

```javascript
const q = queue();

const createTask = v => new Promise(res => setTimeout(() => res(v), v));

q.pushTask(createTask, [100])
.pushTask(createTask, [200])
.pushTask(createTask, [300]);

q.done(result => console.log(result));
q.doTasks();
```

Returns **[Queue](#queue)** new instance of Queue

### reduce

The reduce() method reduces the array to a single value. 
The reduce() method executes a provided function for each value 
of the array (from left-to-right). The return value of the 
function is stored in an accumulator (result/total).

#### Parameters

-   `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** A function
    (with a callback or promise contract)
    that takes each argument
    as input and returns the processed value.
    -   `fn.acc` **any** accumulator.
    -   `fn.item` **any** current value.
    -   `fn.callback` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** The callback function
        in which the processed value is passed,
        if fn function with callback contract.
-   `startValue` **any** your starting value, 
    otherwise it's 0.
-   `arr` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** array of values. (optional, default `[]`)
-   `config` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** object with settings
    for a function (optional, default `{}`)

#### Examples

```javascript
reduce((acc, item, callback) => {
setTimeout(() => callback(null, acc + item), 1000);
}, 10, [1, 2, 3, 4, 5, 6], { isCb: true })
.then(res => console.log(res))
.catch(err => console.log(err.message));
```

Returns **any** result of calculations

### retry

Retry system fot async functions

#### Parameters

-   `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** An asynchronous function that has to be repeated several times.
-   `args` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** Array of arguments for the function. (optional, default `[]`)
-   `config`   (optional, default `{}`)
-   `confing` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** An object with settings for a function.

#### Examples

```javascript
let minSum = 20;

const asyncSum = async (a, b) => {
await sleep(100);
if (a + b < minSum) {
minSum -= a + b;
throw new Error('Sorry');
}
return a + b;
};

retry(asyncSum, [2, 3], { retries: 5, interval: 10 })
.then(data => test.strictSame(data, expectedResult));
```

Returns **any** the value of the fn, or an error
